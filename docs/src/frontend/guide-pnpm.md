---
title: pnpm è¯¦è§£ä¸æœ€ä½³å®è·µ
description: ä»‹ç» pnpm åŒ…ç®¡ç†å·¥å…·çš„æ ¸å¿ƒåŸç†ã€å®‰è£…é…ç½®ã€åŸºç¡€ä¸é«˜çº§ç”¨æ³•ã€Monorepo æ”¯æŒã€æœ€ä½³å®è·µä»¥åŠä¸å…¶ä»–åŒ…ç®¡ç†å·¥å…·çš„å¯¹æ¯”ã€‚
---

# pnpm è¯¦è§£ä¸æœ€ä½³å®è·µ

pnpm å®˜æ–¹æ–‡æ¡£ï¼š<https://pnpm.io/zh/>

æœ¬æ–‡å…¨é¢ä»‹ç»ç°ä»£ JavaScript åŒ…ç®¡ç†å·¥å…· pnpmï¼ˆPerformant npmï¼‰ï¼Œæ¶µç›–å…¶æ ¸å¿ƒåŸç†ã€å®‰è£…é…ç½®ã€åŸºç¡€ä¸é«˜çº§ç”¨æ³•ã€Monorepo æ”¯æŒã€æœ€ä½³å®è·µä»¥åŠä¸å…¶ä»–åŒ…ç®¡ç†å·¥å…·çš„å¯¹æ¯”ã€‚

## 1. æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯ pnpm

pnpmï¼ˆPerformant npmï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Node.js åŒ…ç®¡ç†å™¨ï¼Œæ—¨åœ¨ä¼˜åŒ–åŒ…çš„å®‰è£…å’Œç®¡ç†è¿‡ç¨‹ï¼Œæå‡é€Ÿåº¦å’Œæ•ˆç‡ã€‚å®ƒç”± npm/yarn è¡ç”Ÿè€Œæ¥ï¼Œè§£å†³äº† npm/yarn å†…éƒ¨æ½œåœ¨çš„ bugï¼Œæå¤§åœ°ä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ‰©å±•äº†ä½¿ç”¨åœºæ™¯ï¼Œè¢«èª‰ä¸º"æœ€å…ˆè¿›çš„åŒ…ç®¡ç†å·¥å…·"ã€‚

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹© pnpm

- **èŠ‚çœç£ç›˜ç©ºé—´**ï¼špnpm é€šè¿‡ç¡¬é“¾æ¥å…±äº«ä¾èµ–ï¼Œé¿å…é‡å¤å®‰è£…ï¼ŒèŠ‚çœ 40-65% çš„å­˜å‚¨ç©ºé—´ã€‚
- **å®‰è£…é€Ÿåº¦æ›´å¿«**ï¼šç›¸æ¯” npm/yarn æ›´é«˜æ•ˆï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹å®‰è£…é€Ÿåº¦ç”šè‡³å¯ä»¥è¾¾åˆ° npm å’Œ yarn çš„ä¸¤å€å·¦å³ã€‚
- **ä¸¥æ ¼ä¾èµ–éš”ç¦»**ï¼šé€šè¿‡ç¬¦å·é“¾æ¥ç¡®ä¿é¡¹ç›®åªèƒ½è®¿é—®å…¶å£°æ˜çš„ä¾èµ–ï¼Œé¿å…ä¾èµ–æ±¡æŸ“ï¼ˆå¹½çµä¾èµ–ï¼‰ã€‚
- **æ›´å¥½çš„å·¥ä½œåŒºæ”¯æŒ**ï¼šå†…å»º Monorepo ç®¡ç†å·¥å…·ï¼Œåª²ç¾ Lerna + Yarn Workspacesã€‚

## 2. æ ¸å¿ƒåŸç†

pnpm é€šè¿‡ä¸‰é‡æŠ€æœ¯å®ç°é«˜æ•ˆä¾èµ–ç®¡ç†ï¼š

### 2.1 ç¡¬é“¾æ¥ï¼ˆHard Linksï¼‰æœºåˆ¶

pnpm åœ¨å…¨å±€å­˜å‚¨ï¼ˆé»˜è®¤ `~/.pnpm-store`ï¼‰ä¿ç•™åŒ…çš„å”¯ä¸€å‰¯æœ¬ï¼Œé¡¹ç›®é€šè¿‡ç¡¬é“¾æ¥å¼•ç”¨ï¼š

```bash
# æŸ¥çœ‹å…¨å±€å­˜å‚¨è·¯å¾„
pnpm store path
```

**ä¼˜åŠ¿**ï¼šé¿å…é‡å¤å­˜å‚¨ï¼ŒèŠ‚çœ 50-90% ç£ç›˜ç©ºé—´ã€‚

### 2.2 ç¬¦å·é“¾æ¥ï¼ˆSymbolic Linksï¼‰éš”ç¦»

ä¾èµ–æ ‘é€šè¿‡ç¬¦å·é“¾æ¥æ„å»ºéš”ç¦»å±‚çº§ï¼š

```bash
node_modules
â”œâ”€â”€ react -> .pnpm/react@18.2.0/node_modules/react
â””â”€â”€ .pnpm # ä¾èµ–éš”ç¦»å±‚
```

**æœ¬è´¨**ï¼šè§£å†³ npm/yarn çš„æ‰å¹³åŒ–ä¾èµ–å†²çªã€‚

### 2.3 å†…å®¹å¯»å€å­˜å‚¨ï¼ˆContent-Addressable Storageï¼‰

åŒ…å­˜å‚¨åŸºäºå†…å®¹å“ˆå¸Œï¼ˆå¦‚ `sha512-XXX`ï¼‰ï¼Œç¡®ä¿ï¼š

- **ç‰ˆæœ¬ä¸€è‡´æ€§**
- **è·¨é¡¹ç›®å…±äº«**
- **å®‰å…¨æ ¡éªŒ**ï¼ˆé˜²æ­¢ç¯¡æ”¹ï¼‰

**è·¨å¹³å°æ”¯æŒ**ï¼šWindowsï¼ˆéœ€ç®¡ç†å‘˜æƒé™/WSLï¼‰ã€Linuxã€macOS å…¨å…¼å®¹ã€‚

## 3. å®‰è£…ä¸é…ç½®

### 3.1 å®‰è£… pnpm

```bash
# é€šè¿‡ npm å®‰è£…ï¼ˆæ¨èï¼‰
npm install -g pnpm

# æˆ–ä½¿ç”¨ corepackï¼ˆNode.js >= 16.13.0ï¼‰
corepack enable
corepack prepare pnpm@latest --activate

# Windows ç”¨æˆ·å¯é€‰å®‰è£…æ–¹å¼
scoop install pnpm   # é€šè¿‡ Scoop åŒ…ç®¡ç†å™¨
choco install pnpm   # é€šè¿‡ Chocolatey åŒ…ç®¡ç†å™¨
```

éªŒè¯å®‰è£…ï¼š`pnpm -v` åº”æ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆå»ºè®® â‰¥8.0.0ï¼‰

### 3.2 é…ç½®é•œåƒæº

```bash
# æ°¸ä¹…åˆ‡æ¢æ·˜å®é•œåƒ
pnpm config set registry https://registry.npmmirror.com

# ç§æœ‰ä»“åº“è®¤è¯ï¼ˆéœ€Tokenï¼‰
pnpm config set //my-registry.com/:_authToken=xxxx

# æ¢å¤é»˜è®¤è®¾ç½®
pnpm config delete registry
```

### 3.3 å­˜å‚¨è·¯å¾„ç®¡ç†

```bash
# æŸ¥çœ‹é»˜è®¤å­˜å‚¨è·¯å¾„
pnpm store path

# ä¿®æ”¹å­˜å‚¨ä½ç½®ï¼ˆé¿å…ç³»ç»Ÿç›˜ç©ºé—´ä¸è¶³ï¼‰
pnpm config set store-dir /mnt/ssd/pnpm-store

# ç¯å¢ƒå˜é‡ä¸´æ—¶è¦†ç›–
export PNPM_STORE_DIR=/mnt/ssd/pnpm-store
pnpm install
```

### 3.4 Node.js ç‰ˆæœ¬ç®¡ç†

pnpm å¯ä»¥ç®¡ç† Node.js ç‰ˆæœ¬ï¼Œæ›¿ä»£ nvmï¼š

```bash
# å®‰è£…æœ€æ–° LTS ç‰ˆæœ¬
pnpm env use --global lts

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
pnpm env use --global 20.11.1

# åˆ—å‡ºè¿œç¨‹å¯ç”¨ç‰ˆæœ¬
pnpm env list --remote

# åˆ—å‡ºå·²å®‰è£…ç‰ˆæœ¬
pnpm env list

# ä¸ºé¡¹ç›®æŒ‡å®š Node.js ç‰ˆæœ¬
pnpm env use 20.11.1
```

åœ¨ `package.json` ä¸­æŒ‡å®šå¼•æ“ç‰ˆæœ¬ï¼š

```json
{
  "name": "my-project",
  "engines": {
    "node": "20.11.1",
    "pnpm": "8.15.0"
  },
  "packageManager": "pnpm@8.15.0"
}
```

## 4. åŸºç¡€ä½¿ç”¨

### 4.1 å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| æ“ä½œç±»å‹     | å‘½ä»¤ç¤ºä¾‹                   | è¯´æ˜                                         |
| ------------ | -------------------------- | -------------------------------------------- |
| åˆå§‹åŒ–é¡¹ç›®   | `pnpm init`                | åˆ›å»º package.json                            |
| å®‰è£…æ‰€æœ‰ä¾èµ– | `pnpm install` æˆ– `pnpm i` | è¯»å– package.json å®‰è£…                       |
| å®‰è£…ç”Ÿäº§ä¾èµ– | `pnpm add lodash`          | æ·»åŠ åˆ° dependencies                          |
| å®‰è£…å¼€å‘ä¾èµ– | `pnpm add -D eslint`       | æ·»åŠ åˆ° devDependencies                       |
| å®‰è£…æŒ‡å®šç‰ˆæœ¬ | `pnpm add react@18.2.0`    | ç²¾ç¡®ç‰ˆæœ¬æ§åˆ¶                                 |
| å…¨å±€å®‰è£…å·¥å…· | `pnpm add -g pnpm`         | è·¨é¡¹ç›®å…±äº«å·¥å…·                               |
| æ›´æ–°æ‰€æœ‰ä¾èµ– | `pnpm update`              | æ›´æ–°æ‰€æœ‰ä¾èµ–                                 |
| æ›´æ–°ç‰¹å®šåŒ…   | `pnpm update lodash`       | æ›´æ–°æŒ‡å®šåŒ…                                   |
| å¸è½½ä¾èµ–     | `pnpm remove lodash`       | ä» dependencies ä¸­ç§»é™¤                       |
| è¿è¡Œè„šæœ¬     | `pnpm run dev`             | è¿è¡Œ package.json ä¸­ scripts å®šä¹‰çš„ dev è„šæœ¬ |
| æŸ¥çœ‹ä¾èµ–æ ‘   | `pnpm list`                | é¡¹ç›®ä¾èµ–æ ‘                                   |
| æŸ¥çœ‹å…¨å±€åŒ…   | `pnpm list -g --depth=0`   | å…¨å±€å®‰è£…çš„åŒ…                                 |

### 4.2 ä¾èµ–åˆ†æ

```bash
# æ£€æŸ¥ä¾èµ–æ¥æº
pnpm why react-dom

# è‡ªåŠ¨ä¿®å¤ peer ä¾èµ–
pnpm add --fix-peer-dependencies
```

### 4.3 ç¼“å­˜ç®¡ç†

```bash
# æ¸…ç†æ— æ•ˆç¼“å­˜
pnpm store prune

# æŸ¥çœ‹ç¼“å­˜è¯¦æƒ…
pnpm store status
```

## 5. é«˜çº§åŠŸèƒ½

### 5.1 å·¥ä½œåŒºï¼ˆMonorepoï¼‰ç®¡ç†

pnpm åŸç”Ÿæ”¯æŒ Monorepoï¼Œåˆ›å»ºé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```bash
my-monorepo/
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ packages/
    â”œâ”€â”€ a/
    â””â”€â”€ b/
```

#### 5.1.1 æ ¸å¿ƒé…ç½®

**pnpm-workspace.yaml**ï¼š

```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

**æ ¹ç›®å½• package.json**ï¼š

```json
{
  "private": true,
  "name": "my-monorepo",
  "devDependencies": {
    "typescript": "^5.0.0"
  },
  "scripts": {
    "build": "pnpm -r run build",
    "dev": "pnpm -r run dev"
  }
}
```

#### 5.1.2 å¸¸ç”¨ Monorepo å‘½ä»¤

| å‘½ä»¤                    | ä½œç”¨è¯´æ˜                                    |
| ----------------------- | ------------------------------------------- |
| `pnpm install`          | å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆè‡ªåŠ¨è¯†åˆ«å¹¶é“¾æ¥ workspace åŒ…ï¼‰ |
| `pnpm -r run build`     | æ‰€æœ‰å­åŒ…æ‰§è¡Œ build è„šæœ¬                     |
| `pnpm -F ui run build`  | ä»…è¿è¡Œ packages/ui çš„ build è„šæœ¬            |
| `pnpm add lodash -w`    | åœ¨ workspace æ ¹ç›®å½•æ·»åŠ å…¬å…±ä¾èµ–             |
| `pnpm add react -F web` | ç»™ web åº”ç”¨å•ç‹¬å®‰è£…ä¾èµ–                     |
| `pnpm update -r`        | é€’å½’æ›´æ–°æ‰€æœ‰å­åŒ…ä¾èµ–                        |

#### 5.1.3 å­åŒ…ä¹‹é—´ä¾èµ–äº’è”

é¡¹ç›®ç»“æ„ï¼š

```bash
packages/
â”œâ”€â”€ ui/        # package.json: name: "@my/ui"
â”œâ”€â”€ utils/     # package.json: name: "@my/utils"
```

åœ¨ web åº”ç”¨ä¸­ä½¿ç”¨ï¼š

```bash
pnpm add @my/ui @my/utils -F web
```

**ä¼˜åŠ¿**ï¼š

- ä¼šè‡ªåŠ¨å»ºç«‹è½¯é“¾æ¥ï¼Œæ— éœ€å‘å¸ƒåˆ° npm
- å¤šåŒ…å…±äº«åŒä¸€ä»½ä¾èµ–ï¼Œä¸é‡å¤å®‰è£…

### 5.2 ä¸¥æ ¼æ¨¡å¼é…ç½®

```bash
# å¯ç”¨ä¸¥æ ¼ä¾èµ–éš”ç¦»ï¼ˆé˜²æ­¢å¹½çµä¾èµ–ï¼‰
echo "public-hoist-pattern[]=*" >> .npmrc

# é”å®šä¾èµ–ç‰ˆæœ¬
pnpm install --frozen-lockfile
```

### 5.3 é’©å­ç³»ç»Ÿ

é€šè¿‡ `.pnpmfile.js` å®šåˆ¶å®‰è£…æµç¨‹ï¼š

```javascript
module.exports = {
  hooks: {
    readPackage(pkg) {
      // ä¿®æ”¹ package.json
      if (pkg.name === 'some-package') {
        pkg.dependencies = pkg.dependencies || {};
        pkg.dependencies['some-dependency'] = '^1.0.0';
      }
      return pkg;
    },
  },
};
```

### 5.4 ç¦»çº¿æ¨¡å¼

é…ç½® `~/.npmrc` æ·»åŠ  `offline=true`ï¼š

```bash
# ç¦»çº¿å®‰è£…æ¨¡å¼
pnpm install --offline

# å¹¶è¡Œå®‰è£…åŠ é€Ÿ
pnpm install --prefer-offline
```

## 6. æœ€ä½³å®è·µ

### 6.1 å›¢é˜Ÿåä½œè§„èŒƒ

```bash
# ç»Ÿä¸€é…ç½®æ¨¡æ¿
pnpm config set save-prefix='~'
pnpm config set engine-strict true

# ä¾èµ–ç‰ˆæœ¬é”å®š
pnpm import  # å°† package-lock.json è½¬æ¢ä¸º pnpm-lock.yaml
```

**æœ€ä½³å®è·µ**ï¼š

- åœ¨ç‰ˆæœ¬åº“ä¸­æäº¤ `.npmrc` ç»Ÿä¸€å­˜å‚¨å’Œæ³¨å†Œè¡¨è®¾ç½®
- ä½¿ç”¨ `pnpm-lock.yaml` ç¡®ä¿ä¾èµ–ä¸€è‡´æ€§

### 6.2 CI/CD ä¼˜åŒ–æ–¹æ¡ˆ

```bash
# GitLab CI ç¤ºä¾‹
cache:
  paths:
    - /mnt/ci-cache/pnpm-store
script:
  - export PNPM_STORE_DIR=/mnt/ci-cache/pnpm-store
  - pnpm install --frozen-lockfile
```

**Docker ç”Ÿäº§çº§éƒ¨ç½²**ï¼š

```dockerfile
FROM node:18-alpine
RUN npm install -g pnpm@8
ENV PNPM_STORE_DIR=/app/.pnpm-store
COPY . .
RUN pnpm install --prod --frozen-lockfile
CMD ["pnpm", "start"]
```

### 6.3 å­˜å‚¨è·¯å¾„ä¼˜åŒ–

**é—®é¢˜åœºæ™¯**ï¼šé»˜è®¤ `~/.pnpm-store` ç©ºé—´ä¸è¶³æˆ–éœ€è¿ç§»åˆ°é«˜é€Ÿç£ç›˜

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ³•1: æ°¸ä¹…ä¿®æ”¹é…ç½®
pnpm config set store-dir /mnt/ssd/pnpm-store

# æ–¹æ³•2: ç¯å¢ƒå˜é‡ä¸´æ—¶è¦†ç›–
export PNPM_STORE_DIR=/mnt/ssd/pnpm-store
pnpm install
```

**æ³¨æ„äº‹é¡¹**ï¼š

- Windows ç³»ç»Ÿéœ€ç®¡ç†å‘˜æƒé™è¿è¡Œå‘½ä»¤
- è¿ç§»æ—¶éœ€ä¿æŒæ–‡ä»¶æƒé™ä¸€è‡´ï¼š

  ```bash
  cp -R ~/.pnpm-store/* /mnt/ssd/pnpm-store
  chmod -R 755 /mnt/ssd/pnpm-store
  ```

### 6.4 ä¾èµ–å†²çªè¯Šæ–­

```bash
# æ˜¾ç¤ºä¾èµ–æ ‘è·¯å¾„
pnpm why react

# è‡ªåŠ¨ä¿®å¤
pnpm add --fix-peer-dependencies
```

### 6.5 ç£ç›˜æ¸…ç†

```bash
# æŸ¥çœ‹å½“å‰å­˜å‚¨ä½ç½®
pnpm store path

# åˆ é™¤æœªè¢«å¼•ç”¨çš„åŒ…
pnpm store prune
```

## 7. è¿ç§»æŒ‡å—

### 7.1 ä» npm/yarn è¿ç§»

```bash
# å…¨å±€å®‰è£… pnpm
npm install -g pnpm

# ä»ç°æœ‰ lock æ–‡ä»¶è¿ç§»
pnpm import

# é¦–æ¬¡å®‰è£…
pnpm install
```

### 7.2 é—®é¢˜è§£å†³

| é—®é¢˜ç°è±¡               | è§£å†³æ–¹æ¡ˆ                      | åŸç†è¯´æ˜             |
| ---------------------- | ----------------------------- | -------------------- |
| Error: ENOSPC ç©ºé—´ä¸è¶³ | æ¸…ç†ç¼“å­˜ + ä¿®æ”¹å­˜å‚¨è·¯å¾„       | ç¬¦å·é“¾æ¥å ç”¨ç©ºé—´ä¼˜åŒ– |
| ä¾èµ–ç‰ˆæœ¬å†²çª           | pnpm dedupe + ä¸¥æ ¼æ¨¡å¼        | å†…å®¹å¯»å€é¿å…ç‰ˆæœ¬é‡å¤ |
| ç§æœ‰åŒ…å®‰è£…å¤±è´¥         | é…ç½®ç§æœ‰ registry + è®¤è¯      | è¦†ç›–é»˜è®¤ä»“åº“åœ°å€     |
| Windows è·¯å¾„è¿‡é•¿æŠ¥é”™   | å¯ç”¨é•¿è·¯å¾„æ”¯æŒ + ç¼©çŸ­å­˜å‚¨è·¯å¾„ | æ–‡ä»¶ç³»ç»Ÿé™åˆ¶è§„é¿     |

**é¡¹ç›®å¼•ç”¨æœªç”Ÿæ•ˆï¼Ÿ**

- ç¡®ä¿åœ¨æ ¹ç›®å½•è¿è¡Œ `pnpm install`ï¼Œè€Œéå­é¡¹ç›®

**æŸäº›ä¾èµ–æ— æ³•å®‰è£…ï¼Ÿ**

- å°è¯•åŠ ä¸Š `--shamefully-hoist` å‚æ•°å…¼å®¹æ—§é¡¹ç›®ï¼š

  ```bash
  pnpm install --shamefully-hoist
  ```

## 8. ä¸å…¶ä»–åŒ…ç®¡ç†å™¨å¯¹æ¯”

### 8.1 èƒ½åŠ›çŸ©é˜µå¯¹æ¯”

| èƒ½åŠ›ç»´åº¦      | pnpm                  | npm           | yarn (v3+)        |
| ------------- | --------------------- | ------------- | ----------------- |
| æ ¸å¿ƒæœºåˆ¶      | ç¡¬é“¾æ¥+ç¬¦å·é“¾æ¥       | æ‰å¹³åŒ–ä¾èµ–æ ‘  | Plug'n'Play (PnP) |
| ç£ç›˜æ•ˆç‡      | â­â­â­ (èŠ‚çœ50â€“90%)   | â­ (é«˜å†—ä½™)   | â­â­ (ä¸­ç­‰)       |
| å®‰è£…é€Ÿåº¦      | â­â­â­ (å¿«2â€“5å€)      | â­ (æ…¢)       | â­â­ (å¿«)         |
| ä¾èµ–éš”ç¦»      | â­â­â­ (ç¬¦å·é“¾æ¥éš”ç¦») | â­ (æ˜“å†²çª)   | â­â­ (PnPæ²™ç›’)    |
| å­˜å‚¨è·¯å¾„å®šåˆ¶  | âœ… å…¨é¢æ”¯æŒ           | âŒ å—é™       | âŒ ä¸å¯ä¿®æ”¹       |
| æ³¨å†Œè¡¨çµæ´»æ€§  | âœ… åŠ¨æ€é…ç½®           | âœ… æ”¯æŒ       | âœ… æ”¯æŒ           |
| Monorepo æ”¯æŒ | åŸç”Ÿ Workspace        | éœ€ Lerna è¾…åŠ© | åŸç”Ÿ Workspace    |

### 8.2 é€‚ç”¨åœºæ™¯å»ºè®®

- **æ¨è pnpm**ï¼šå¤§å‹é¡¹ç›®ã€CI/CD æµç¨‹ã€å¤šå›¢é˜Ÿåä½œ
- **ä»ç”¨ npm**ï¼šæ—§é¡¹ç›®è¿ç§»ã€éœ€è¦å…¼å®¹æ—§ç‰ˆ Node.js
- **è€ƒè™‘ yarn**ï¼šéœ€è¦ pnp æ¨¡å¼æˆ–ç‰¹å®šæ’ä»¶ç”Ÿæ€

## 9. å…¸å‹åº”ç”¨åœºæ™¯

### 9.1 å¤§å‹ Monorepo é¡¹ç›®

```yaml
# pnpm-workspace.yaml
packages:
  - 'packages/*'
  - 'apps/*'
```

### 9.2 ä¼ä¸šçº§åº”ç”¨åœºæ™¯

- **ä¼ä¸šçº§å‰ç«¯å¹³å°**ï¼ˆå¤šç³»ç»Ÿç»Ÿä¸€ç®¡ç†ï¼‰
- **å¾®å‰ç«¯å­åº”ç”¨ç»Ÿä¸€æ„å»ºä¸å‘å¸ƒ**
- **è·¨é¡¹ç›®å¤ç”¨ç»„ä»¶åº“ã€å·¥å…·åº“**
- **Serverless å‡½æ•°é›†åˆã€æ’ä»¶é›†åˆç®¡ç†**

### 9.3 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

| é—®é¢˜ç°è±¡               | è§£å†³æ–¹æ¡ˆ                      | åŸç†è¯´æ˜             |
| ---------------------- | ----------------------------- | -------------------- |
| Error: ENOSPC ç©ºé—´ä¸è¶³ | æ¸…ç†ç¼“å­˜ + ä¿®æ”¹å­˜å‚¨è·¯å¾„       | ç¬¦å·é“¾æ¥å ç”¨ç©ºé—´ä¼˜åŒ– |
| ä¾èµ–ç‰ˆæœ¬å†²çª           | pnpm dedupe + ä¸¥æ ¼æ¨¡å¼        | å†…å®¹å¯»å€é¿å…ç‰ˆæœ¬é‡å¤ |
| ç§æœ‰åŒ…å®‰è£…å¤±è´¥         | é…ç½®ç§æœ‰ registry + è®¤è¯      | è¦†ç›–é»˜è®¤ä»“åº“åœ°å€     |
| Windows è·¯å¾„è¿‡é•¿æŠ¥é”™   | å¯ç”¨é•¿è·¯å¾„æ”¯æŒ + ç¼©çŸ­å­˜å‚¨è·¯å¾„ | æ–‡ä»¶ç³»ç»Ÿé™åˆ¶è§„é¿     |

## 10. æ€»ç»“

pnpm é€šè¿‡ç¡¬é“¾æ¥+ç¬¦å·é“¾æ¥+å†…å®¹å¯»å€å­˜å‚¨ä¸‰ä½ä¸€ä½“çš„æ¶æ„ï¼Œå®ç°äº†ï¼š

- ğŸ“‰ **ç£ç›˜ç©ºé—´èŠ‚çœ**æœ€é«˜è¾¾90%
- âš¡ **å®‰è£…é€Ÿåº¦æå‡**2â€“5å€
- ğŸ”’ **ä¾èµ–éš”ç¦»æ›´å®‰å…¨**

### 10.1 å…³é”®å®è·µå»ºè®®

- **å­˜å‚¨è·¯å¾„ä¼˜åŒ–**ï¼šåœ¨ CI/CD ä¸­æŒ‡å‘é«˜é€Ÿå­˜å‚¨ä»‹è´¨
- **æ³¨å†Œæºå®šåˆ¶**ï¼š
  - å›½å†…å›¢é˜Ÿä½¿ç”¨æ·˜å®é•œåƒåŠ é€Ÿ
  - ä¼ä¸šç¯å¢ƒé…ç½®ç§æœ‰ä»“åº“æå‡å®‰å…¨æ€§
- **Monorepo ç®¡ç†**ï¼šå……åˆ†åˆ©ç”¨åŸç”Ÿ Workspace åŠŸèƒ½
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå¼ºåˆ¶æäº¤ `pnpm-lock.yaml` æ–‡ä»¶

### 10.2 ç«‹å³ä½“éªŒ

```bash
npm install -g pnpm
pnpm import  # æ— ç¼è½¬æ¢ç°æœ‰é¡¹ç›®
```

**æœ¬æ–‡åŸºäº pnpm v8+ éªŒè¯ï¼Œé€‚ç”¨äº Windows/WSL/Linux/macOS ç³»ç»Ÿã€‚é‡åˆ°ç›¸å…³é—®é¢˜å»ºè®®å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚**
