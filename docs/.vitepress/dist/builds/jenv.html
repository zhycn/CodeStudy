<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jenv 详解与最佳实践 | CodeStudy​</title>
    <meta name="description" content="系统化整合编程指南、精选书单、视频课程与效率工具，打造个人的高效学习和工作路径。">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/CodeStudy/assets/style.DLM2tLtY.css" as="style">
    <link rel="preload stylesheet" href="/CodeStudy/vp-icons.css" as="style">
    
    <script type="module" src="/CodeStudy/assets/app.CHKneA_3.js"></script>
    <link rel="preload" href="/CodeStudy/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/CodeStudy/assets/chunks/theme.BmWQ93Fc.js">
    <link rel="modulepreload" href="/CodeStudy/assets/chunks/framework.BJxDKYjw.js">
    <link rel="modulepreload" href="/CodeStudy/assets/builds_jenv.md.DHFF7G8z.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-adb156aa><!--[--><!--]--><!--[--><span tabindex="-1" data-v-25894987></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-25894987>Skip to content</a><!--]--><!----><header class="VPNav" data-v-adb156aa data-v-710d54a1><div class="VPNavBar" data-v-710d54a1 data-v-9a931d85><div class="wrapper" data-v-9a931d85><div class="container" data-v-9a931d85><div class="title" data-v-9a931d85><div class="VPNavBarTitle has-sidebar" data-v-9a931d85 data-v-a7678680><a class="title" href="/CodeStudy/" data-v-a7678680><!--[--><!--]--><!----><span data-v-a7678680>CodeStudy​</span><!--[--><!--]--></a></div></div><div class="content" data-v-9a931d85><div class="content-body" data-v-9a931d85><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9a931d85><!--[--><!----><div id="local-search"><button type="button" aria-label="搜索文档" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9a931d85 data-v-b2a6359a><span id="main-nav-aria-label" class="visually-hidden" data-v-b2a6359a> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/CodeStudy/" tabindex="0" data-v-b2a6359a data-v-f51a6a4e><!--[--><span data-v-f51a6a4e>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/CodeStudy/markdown-examples.html" tabindex="0" data-v-b2a6359a data-v-f51a6a4e><!--[--><span data-v-f51a6a4e>Examples</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9a931d85 data-v-0c51f69e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-0c51f69e data-v-4a8a5fa1 data-v-a7b1f22e><span class="check" data-v-a7b1f22e><span class="icon" data-v-a7b1f22e><!--[--><span class="vpi-sun sun" data-v-4a8a5fa1></span><span class="vpi-moon moon" data-v-4a8a5fa1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9a931d85 data-v-9355685b data-v-8d0fad53><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zhycn/CodeStudy" aria-label="github" target="_blank" rel="me noopener" data-v-8d0fad53 data-v-4b28e088><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9a931d85 data-v-8dec9abe data-v-ad93f926><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-ad93f926><span class="vpi-more-horizontal icon" data-v-ad93f926></span></button><div class="menu" data-v-ad93f926><div class="VPMenu" data-v-ad93f926 data-v-7fc4bb5d><!----><!--[--><!--[--><!----><div class="group" data-v-8dec9abe><div class="item appearance" data-v-8dec9abe><p class="label" data-v-8dec9abe>Appearance</p><div class="appearance-action" data-v-8dec9abe><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-8dec9abe data-v-4a8a5fa1 data-v-a7b1f22e><span class="check" data-v-a7b1f22e><span class="icon" data-v-a7b1f22e><!--[--><span class="vpi-sun sun" data-v-4a8a5fa1></span><span class="vpi-moon moon" data-v-4a8a5fa1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8dec9abe><div class="item social-links" data-v-8dec9abe><div class="VPSocialLinks social-links-list" data-v-8dec9abe data-v-8d0fad53><!--[--><a class="VPSocialLink no-icon" href="https://github.com/zhycn/CodeStudy" aria-label="github" target="_blank" rel="me noopener" data-v-8d0fad53 data-v-4b28e088><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9a931d85 data-v-36418c8a><span class="container" data-v-36418c8a><span class="top" data-v-36418c8a></span><span class="middle" data-v-36418c8a></span><span class="bottom" data-v-36418c8a></span></span></button></div></div></div></div><div class="divider" data-v-9a931d85><div class="divider-line" data-v-9a931d85></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-adb156aa data-v-00fb20b8><div class="container" data-v-00fb20b8><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-00fb20b8><span class="vpi-align-left menu-icon" data-v-00fb20b8></span><span class="menu-text" data-v-00fb20b8>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-00fb20b8 data-v-99df689c><button data-v-99df689c>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-adb156aa data-v-d5a2a295><div class="curtain" data-v-d5a2a295></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-d5a2a295><span class="visually-hidden" id="sidebar-aria-label" data-v-d5a2a295> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-36bc6b9e><section class="VPSidebarItem level-0" data-v-36bc6b9e data-v-54834ca1><div class="item" role="button" tabindex="0" data-v-54834ca1><div class="indicator" data-v-54834ca1></div><h2 class="text" data-v-54834ca1>Examples</h2><!----></div><div class="items" data-v-54834ca1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-54834ca1 data-v-54834ca1><div class="item" data-v-54834ca1><div class="indicator" data-v-54834ca1></div><a class="VPLink link link" href="/CodeStudy/markdown-examples.html" data-v-54834ca1><!--[--><p class="text" data-v-54834ca1>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-54834ca1 data-v-54834ca1><div class="item" data-v-54834ca1><div class="indicator" data-v-54834ca1></div><a class="VPLink link link" href="/CodeStudy/api-examples.html" data-v-54834ca1><!--[--><p class="text" data-v-54834ca1>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-adb156aa data-v-68d24d07><div class="VPDoc has-sidebar has-aside" data-v-68d24d07 data-v-02d4cdb5><!--[--><!--]--><div class="container" data-v-02d4cdb5><div class="aside" data-v-02d4cdb5><div class="aside-curtain" data-v-02d4cdb5></div><div class="aside-container" data-v-02d4cdb5><div class="aside-content" data-v-02d4cdb5><div class="VPDocAside" data-v-02d4cdb5 data-v-dc518512><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-dc518512 data-v-774748a4><div class="content" data-v-774748a4><div class="outline-marker" data-v-774748a4></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-774748a4>On this page</div><ul class="VPDocOutlineItem root" data-v-774748a4 data-v-e3037b92><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-dc518512></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-02d4cdb5><div class="content-container" data-v-02d4cdb5><!--[--><!--]--><main class="main" data-v-02d4cdb5><div style="position:relative;" class="vp-doc _CodeStudy_builds_jenv" data-v-02d4cdb5><div><h1 id="jenv-详解与最佳实践" tabindex="-1">jenv 详解与最佳实践 <a class="header-anchor" href="#jenv-详解与最佳实践" aria-label="Permalink to “jenv 详解与最佳实践”">​</a></h1><h2 id="_1-简介-为什么需要-jenv" tabindex="-1">1. 简介：为什么需要 jenv？ <a class="header-anchor" href="#_1-简介-为什么需要-jenv" aria-label="Permalink to “1. 简介：为什么需要 jenv？”">​</a></h2><p>对于 Java 开发者而言，处理多版本 JDK 的场景是家常便饭。一个项目可能依赖 JDK 8，另一个项目则需要最新的 JDK 17，而你的 CI/CD 流水线可能跑在 JDK 11 上。手动切换 <code>JAVA_HOME</code> 环境变量不仅繁琐，还容易出错，尤其是在不同的终端会话或项目中。</p><p><strong>jenv</strong> 就是为了解决这个问题而生的。它是一个轻量级的命令行工具，专为管理多个 Java Development Kit (JDK) 版本而设计。与 <strong>SDKMAN!</strong> 不同，jenv <strong>不负责下载和安装 JDK</strong>，它只专注于一件事：<strong>优雅地管理和切换已安装的 JDK 版本</strong>。</p><p>它的核心优势在于：</p><ul><li><strong>项目级版本管理</strong>: 在特定项目目录下，jenv 可以自动切换到该项目指定的 JDK 版本，无需手动操作。</li><li><strong>全局与局部</strong>: 支持设置全局默认 JDK，也可以为特定项目、甚至特定的终端会话设置独立的 JDK 版本。</li><li><strong>简洁轻量</strong>: jenv 本身是一个 shell 脚本，非常小巧，不会引入额外的依赖。</li><li><strong>自动设置 <code>JAVA_HOME</code></strong>: 这是 jenv 最强大的功能之一。通过其 <code>export</code> 插件，它能确保 <code>JAVA_HOME</code> 环境变量在切换版本时自动更新，这对 Maven、Gradle 等构建工具至关重要。</li></ul><hr><h2 id="_2-核心原理" tabindex="-1">2. 核心原理 <a class="header-anchor" href="#_2-核心原理" aria-label="Permalink to “2. 核心原理”">​</a></h2><p>jenv 的工作机制基于 <strong>shims</strong> 和 <strong>环境变量管理</strong>。</p><ol><li><strong>Shims (垫片)</strong>: jenv 在 <code>$PATH</code> 的最前端插入其 <code>~/.jenv/shims</code> 目录。这个目录包含了 <code>java</code>, <code>javac</code>, <code>jar</code> 等可执行文件的&quot;垫片&quot;。当你执行 <code>java -version</code> 时，首先找到的是 jenv 的 shim 脚本，而不是系统默认的 <code>java</code>。</li><li><strong>版本解析</strong>: jenv 的 shim 脚本会根据你当前所在目录、全局配置或会话配置，解析出应该使用的 JDK 版本。</li><li><strong>路径重定向</strong>: 找到正确的 JDK 版本后，shim 脚本会将命令重定向到实际的 JDK 安装路径下的 <code>bin</code> 目录，从而执行正确的 <code>java</code> 命令。</li><li><strong><code>JAVA_HOME</code> 自动更新</strong>: 配合 <code>export</code> 插件，jenv 会在每次版本切换时，自动更新 <code>JAVA_HOME</code> 环境变量，指向当前生效的 JDK 路径。</li></ol><hr><h2 id="_3-安装与配置" tabindex="-1">3. 安装与配置 <a class="header-anchor" href="#_3-安装与配置" aria-label="Permalink to “3. 安装与配置”">​</a></h2><h3 id="_3-1-安装-jdk" tabindex="-1">3.1. 安装 JDK <a class="header-anchor" href="#_3-1-安装-jdk" aria-label="Permalink to “3.1. 安装 JDK”">​</a></h3><p>如前所述，jenv 不负责安装 JDK。你需要使用适合你操作系统的包管理器或手动下载 JDK。</p><ul><li><p><strong>macOS</strong>: 推荐使用 Homebrew Cask。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 搜索可用的 JDK 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> search</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 JDK 17</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk@17</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装其他版本，例如 JDK 8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk@8</span></span></code></pre></div></li><li><p><strong>Linux</strong>:</p><ul><li><p><strong>Ubuntu/Debian</strong>: 使用 <code>apt</code>。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk-11-jdk</span></span></code></pre></div></li><li><p><strong>Fedora/CentOS</strong>: 使用 <code>yum</code> 或 <code>dnf</code>。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java-17-openjdk-devel</span></span></code></pre></div></li></ul></li><li><p><strong>Windows</strong>: jenv 官方不支持 Windows，但可以通过 WSL (Windows Subsystem for Linux) 来使用。在 WSL 环境中，安装步骤与 Linux 相同。</p></li></ul><h3 id="_3-2-安装-jenv" tabindex="-1">3.2. 安装 jenv <a class="header-anchor" href="#_3-2-安装-jenv" aria-label="Permalink to “3.2. 安装 jenv”">​</a></h3><p><strong>macOS</strong></p><p>使用 Homebrew 是最简单的方式。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jenv</span></span></code></pre></div><p><strong>Linux</strong></p><p>通过 Git 克隆仓库手动安装。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/jenv/jenv.git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.jenv</span></span></code></pre></div><h3 id="_3-3-配置-shell" tabindex="-1">3.3. 配置 Shell <a class="header-anchor" href="#_3-3-配置-shell" aria-label="Permalink to “3.3. 配置 Shell”">​</a></h3><p>这是最关键的一步。你需要将 jenv 相关的配置添加到你的 shell 配置文件中。</p><ul><li><strong>Zsh</strong>: 编辑 <code>~/.zshrc</code></li><li><strong>Bash</strong>: 编辑 <code>~/.bash_profile</code> 或 <code>~/.bashrc</code></li></ul><p>在文件末尾添加以下内容：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># jenv configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.jenv/bin:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">eval</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init -)&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用自动设置 JAVA_HOME 插件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 强烈推荐，否则 Maven、Gradle 等工具将无法正确识别 JDK</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span></span></code></pre></div><p><strong>⚠️ 注意:</strong></p><ul><li><p>如果你使用 Oh My Zsh，<code>eval &quot;$(jenv init -)&quot;</code> 可能会导致一些问题。一个更可靠的方案是，将 jenv 作为一个插件启用。在 <code>.zshrc</code> 中找到 <code>plugins</code> 配置，并添加 <code>jenv</code>：<code>plugins=(git jenv ...)</code>。</p></li><li><p>配置完成后，需要重新加载 shell 配置：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Zsh</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Bash</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bash_profile</span></span></code></pre></div><p>或者直接重启你的终端。</p></li></ul><h3 id="_3-4-验证安装" tabindex="-1">3.4. 验证安装 <a class="header-anchor" href="#_3-4-验证安装" aria-label="Permalink to “3.4. 验证安装”">​</a></h3><p>运行以下命令，确保 jenv 成功加载。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctor</span></span></code></pre></div><p>如果一切正常，你会看到类似的输出，提示你已安装的 JDK 版本和 jenv 的配置状态。如果存在问题，<code>jenv doctor</code> 会给出明确的提示。</p><hr><h2 id="_4-日常使用" tabindex="-1">4. 日常使用 <a class="header-anchor" href="#_4-日常使用" aria-label="Permalink to “4. 日常使用”">​</a></h2><h3 id="_4-1-添加-jdk" tabindex="-1">4.1. 添加 JDK <a class="header-anchor" href="#_4-1-添加-jdk" aria-label="Permalink to “4.1. 添加 JDK”">​</a></h3><p>安装好 JDK 后，需要将其路径添加到 jenv 中。jenv 通常可以自动识别 Homebrew 安装的 JDK。对于手动安装的 JDK，你需要手动添加。</p><p><strong>自动添加 (Homebrew)</strong>:</p><p>jenv 自动识别，无需手动添加。你可以通过 <code>jenv versions</code> 检查。</p><p><strong>手动添加</strong>:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS 示例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 对于 Homebrew 安装的 JDK，其路径通常在 /usr/local/opt 或 /opt/homebrew/opt 下</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux 示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib/jvm/java-11-openjdk-amd64</span></span></code></pre></div><p>添加成功后，jenv 会为这个 JDK 创建一个别名。</p><h3 id="_4-2-查看已注册的-jdk" tabindex="-1">4.2. 查看已注册的 JDK <a class="header-anchor" href="#_4-2-查看已注册的-jdk" aria-label="Permalink to “4.2. 查看已注册的 JDK”">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> versions</span></span></code></pre></div><p>输出示例：</p><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>  system</span></span>
<span class="line"><span>  11</span></span>
<span class="line"><span>  11.0</span></span>
<span class="line"><span>  11.0.2</span></span>
<span class="line"><span>* 17 (set by /Users/user/.jenv/version)</span></span>
<span class="line"><span>  17.0</span></span>
<span class="line"><span>  17.0.6</span></span></code></pre></div><ul><li>带 <code>*</code> 的行表示当前正在使用的 JDK 版本。</li><li><code>system</code> 表示系统默认的 JDK。</li><li><code>11</code>, <code>17</code> 等是 jenv 自动生成的别名。</li></ul><h3 id="_4-3-切换-jdk-版本" tabindex="-1">4.3. 切换 JDK 版本 <a class="header-anchor" href="#_4-3-切换-jdk-版本" aria-label="Permalink to “4.3. 切换 JDK 版本”">​</a></h3><p>jenv 提供了三种级别的版本切换，优先级从高到低依次是：<strong>Shell &gt; Local &gt; Global</strong>。</p><h4 id="a-全局-global" tabindex="-1">a. 全局 (Global) <a class="header-anchor" href="#a-全局-global" aria-label="Permalink to “a. 全局 (Global)”">​</a></h4><p>设置所有终端会话的默认 JDK。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 17</span></span></code></pre></div><p>现在，无论你在哪个目录，<code>java -version</code> 都会显示 JDK 17。</p><h4 id="b-项目级-local" tabindex="-1">b. 项目级 (Local) <a class="header-anchor" href="#b-项目级-local" aria-label="Permalink to “b. 项目级 (Local)”">​</a></h4><p>在特定的项目目录中设置 JDK 版本。这是 jenv 最常用的功能。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/your/project</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span></span></code></pre></div><p>这个命令会在当前目录下创建一个 <code>.java-version</code> 文件，内容就是 <code>11</code>。当你进入这个目录时，jenv 会自动切换到 JDK 11。离开这个目录时，又会自动恢复到全局或上级目录的配置。</p><p><strong>⚠️ 注意</strong>: 推荐将 <code>.java-version</code> 文件加入 Git 版本控制，这样团队成员可以共享项目的 JDK 版本配置。</p><h4 id="c-会话级-shell" tabindex="-1">c. 会话级 (Shell) <a class="header-anchor" href="#c-会话级-shell" aria-label="Permalink to “c. 会话级 (Shell)”">​</a></h4><p>仅在当前终端会话中临时切换 JDK 版本，不会影响其他终端会话。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span></span></code></pre></div><p>这个设置的优先级最高，即使该项目目录有 <code>.java-version</code> 文件，也会被 <code>shell</code> 设置覆盖。</p><hr><h2 id="_5-最佳实践与高级配置" tabindex="-1">5. 最佳实践与高级配置 <a class="header-anchor" href="#_5-最佳实践与高级配置" aria-label="Permalink to “5. 最佳实践与高级配置”">​</a></h2><h3 id="_5-1-启用插件" tabindex="-1">5.1. 启用插件 <a class="header-anchor" href="#_5-1-启用插件" aria-label="Permalink to “5.1. 启用插件”">​</a></h3><p>jenv 强大的功能依赖于其插件系统。以下插件强烈推荐启用：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用 export 插件，自动更新 JAVA_HOME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用 maven 插件，自动为 Maven 设置 JAVA_HOME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> maven</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用 gradle 插件，自动为 Gradle 设置 JAVA_HOME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gradle</span></span></code></pre></div><p>这些插件通常只需启用一次。你可以在 <code>jenv doctor</code> 的输出中查看已启用的插件。</p><h3 id="_5-2-jenv-与-ide-的集成" tabindex="-1">5.2. jenv 与 IDE 的集成 <a class="header-anchor" href="#_5-2-jenv-与-ide-的集成" aria-label="Permalink to “5.2. jenv 与 IDE 的集成”">​</a></h3><p>虽然 jenv 在终端中表现出色，但集成开发环境（如 IntelliJ IDEA、Eclipse）通常有自己的 JDK 管理系统。</p><p><strong>IntelliJ IDEA</strong></p><ul><li><strong>自动识别</strong>: IntelliJ IDEA 能够读取项目目录下的 <code>.java-version</code> 文件，自动推荐使用相应的 JDK。</li><li><strong>手动配置</strong>: 在 <code>File -&gt; Project Structure -&gt; Project Settings -&gt; Project</code> 中，你可以手动选择项目使用的 JDK。推荐在这里配置，因为这能确保 IDE 内部编译和运行环境与 jenv 管理的一致。</li><li><strong>最佳实践</strong>: 在 IDE 中，为每个项目手动配置其正确的 JDK 路径。这比依赖 jenv 插件更稳定，因为它直接配置了 IDE 的构建环境。jenv 主要用于命令行和脚本。</li></ul><h3 id="_5-3-别名与版本命名" tabindex="-1">5.3. 别名与版本命名 <a class="header-anchor" href="#_5-3-别名与版本命名" aria-label="Permalink to “5.3. 别名与版本命名”">​</a></h3><p>jenv 自动为 JDK 生成别名，如 <code>1.8</code>, <code>11</code>, <code>17</code>。但你也可以使用更具描述性的名称。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加时指定别名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/jdk-17-openj9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk-17-openj9</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 之后就可以使用别名切换</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jenv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk-17-openj9</span></span></code></pre></div><p>这对于区分不同厂商（如 Oracle、OpenJDK、Adoptium）的 JDK 版本非常有用。</p><hr><h2 id="_6-jenv-vs-sdkman" tabindex="-1">6. jenv vs. SDKMAN\ <a class="header-anchor" href="#_6-jenv-vs-sdkman" aria-label="Permalink to “6. jenv vs. SDKMAN\”">​</a></h2><p>这是 jenv 社区中一个常见的问题。两者各有优劣，但可以互补使用。</p><table tabindex="0"><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;"><strong>jenv</strong></th><th style="text-align:left;"><strong>SDKMAN!</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><strong>核心功能</strong></td><td style="text-align:left;"><strong>管理</strong>已安装的 JDK 版本</td><td style="text-align:left;"><strong>安装与管理</strong>各种 SDK (包括 JDK)</td></tr><tr><td style="text-align:left;"><strong>安装方式</strong></td><td style="text-align:left;">Git 或 Homebrew</td><td style="text-align:left;">Curl 脚本</td></tr><tr><td style="text-align:left;"><strong>适用场景</strong></td><td style="text-align:left;">专注于 JDK 版本切换，特别是项目级管理</td><td style="text-align:left;">一站式解决方案，用于管理 JDK、Maven、Gradle、Kotlin 等多种工具</td></tr><tr><td style="text-align:left;"><strong>优劣</strong></td><td style="text-align:left;">极简、轻量、只做一件事，<strong>对现有 JDK 环境无侵入</strong></td><td style="text-align:left;">功能强大、方便快捷、无需手动下载，但可能引入更多依赖</td></tr><tr><td style="text-align:left;"><strong>互补性</strong></td><td style="text-align:left;"><strong>完美互补</strong>！使用 SDKMAN! 下载和安装 JDK，再用 jenv 管理它们。</td><td style="text-align:left;"></td></tr></tbody></table><h3 id="推荐工作流" tabindex="-1">推荐工作流 <a class="header-anchor" href="#推荐工作流" aria-label="Permalink to “推荐工作流”">​</a></h3><ol><li><strong>使用 SDKMAN! 安装 JDK</strong>：<code>sdk install java 17.0.8-tem</code></li><li><strong>将 SDKMAN! 安装的 JDK 添加到 jenv</strong>：<code>jenv add ~/.sdkman/candidates/java/17.0.8-tem</code></li><li><strong>使用 jenv 进行版本切换和项目管理</strong>：<code>jenv local 17.0.8-tem</code></li></ol><p>这种组合方式，既享受了 SDKMAN! 一键安装的便利，又利用了 jenv 在项目级别切换的精确控制。</p><hr><h2 id="_7-常见问题排查-faqs" tabindex="-1">7. 常见问题排查 (FAQs) <a class="header-anchor" href="#_7-常见问题排查-faqs" aria-label="Permalink to “7. 常见问题排查 (FAQs)”">​</a></h2><h4 id="q1-为什么我设置了-jenv-global-或-jenv-local-但-java-version-还是显示系统默认版本" tabindex="-1"><strong>Q1: 为什么我设置了 <code>jenv global</code> 或 <code>jenv local</code>，但 <code>java -version</code> 还是显示系统默认版本？</strong> <a class="header-anchor" href="#q1-为什么我设置了-jenv-global-或-jenv-local-但-java-version-还是显示系统默认版本" aria-label="Permalink to “Q1: 为什么我设置了 jenv global 或 jenv local，但 java -version 还是显示系统默认版本？”">​</a></h4><p><strong>A:</strong></p><ol><li><strong>检查 Shell 配置</strong>: 确保 <code>eval &quot;$(jenv init -)&quot;</code> 和 <code>export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;</code> 在你的 <code>.zshrc</code> 或 <code>.bash_profile</code> 中，且配置正确。</li><li><strong>重新加载 Shell</strong>: 运行 <code>source</code> 命令或重启终端。</li><li><strong>检查 <code>$PATH</code></strong>: 运行 <code>echo $PATH</code>，确保 <code>~/.jenv/shims</code> 位于 <code>$PATH</code> 的最前端。</li><li><strong><code>jenv doctor</code></strong>: 运行此命令，它会给你最准确的诊断信息。</li></ol><h4 id="q2-为什么-maven-或-gradle-找不到正确的-jdk" tabindex="-1"><strong>Q2: 为什么 Maven 或 Gradle 找不到正确的 JDK？</strong> <a class="header-anchor" href="#q2-为什么-maven-或-gradle-找不到正确的-jdk" aria-label="Permalink to “Q2: 为什么 Maven 或 Gradle 找不到正确的 JDK？”">​</a></h4><p><strong>A:</strong></p><ol><li><strong>启用 <code>export</code> 插件</strong>: 确保你运行了 <code>jenv enable-plugin export</code>。这个插件是确保 <code>JAVA_HOME</code> 自动更新的关键。</li><li><strong>重启终端</strong>: 插件启用后需要重启终端才能生效。</li><li><strong>检查 <code>JAVA_HOME</code></strong>: 在你的项目目录下，运行 <code>echo $JAVA_HOME</code>。如果它指向正确的 JDK 路径，问题可能出在你的构建工具配置上。</li></ol><h4 id="q3-jenv-支持-windows-吗" tabindex="-1"><strong>Q3: jenv 支持 Windows 吗？</strong> <a class="header-anchor" href="#q3-jenv-支持-windows-吗" aria-label="Permalink to “Q3: jenv 支持 Windows 吗？”">​</a></h4><p><strong>A:</strong> jenv 是为类 Unix 系统（Linux/macOS）设计的，不直接支持 Windows。但在 Windows 上，你可以通过安装 <strong>WSL (Windows Subsystem for Linux)</strong> 来使用 jenv，它能提供一个完整的 Linux 环境。</p></div></div></main><footer class="VPDocFooter" data-v-02d4cdb5 data-v-5f7ae93a><!--[--><!--]--><div class="edit-info" data-v-5f7ae93a><!----><div class="last-updated" data-v-5f7ae93a><p class="VPLastUpdated" data-v-5f7ae93a data-v-78348ead>Last updated: <time datetime="2025-08-29T09:56:55.000Z" data-v-78348ead></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-5f7ae93a><span class="visually-hidden" id="doc-footer-aria-label" data-v-5f7ae93a>Pager</span><div class="pager" data-v-5f7ae93a><!----></div><div class="pager" data-v-5f7ae93a><a class="VPLink link pager-link next" href="/CodeStudy/markdown-examples.html" data-v-5f7ae93a><!--[--><span class="desc" data-v-5f7ae93a>Next page</span><span class="title" data-v-5f7ae93a>Markdown Examples</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"Ut3Q2DWL\",\"articles.md\":\"CI0l_bgG\",\"books_index.md\":\"CIAnU_Qg\",\"builds_index.md\":\"JaN02wRv\",\"builds_jenv.md\":\"DHFF7G8z\",\"builds_p-homebrew.md\":\"D5IQAgy7\",\"builds_sdkman.md\":\"C68E3MAP\",\"courses_index.md\":\"DUhOMXyr\",\"index.md\":\"DMj1xhkM\",\"markdown-examples.md\":\"BBJilX3b\",\"notes_index.md\":\"bEs9_S7Q\",\"notes_lombok.md\":\"Dvl57eA9\",\"notes_prettier.md\":\"BN5d06Uh\",\"projects_index.md\":\"C2nzcMP7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"CodeStudy​\",\"description\":\"系统化整合编程指南、精选书单、视频课程与效率工具，打造个人的高效学习和工作路径。\",\"base\":\"/CodeStudy/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\"}}}}},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Examples\",\"link\":\"/markdown-examples\"}],\"sidebar\":[{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zhycn/CodeStudy\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>